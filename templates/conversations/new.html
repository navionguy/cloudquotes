<html>
<script>
    function prevQuote() {
        seq = document.getElementById("quote-sequence");
        newValue = parseInt(seq.value) - 1;
        if (newValue >= 0) {
            seq.value = newValue;
        }
        if (newValue == 0) {
            prevButton.src = "<%= assetPath("images/GrayPrev.png") %>"
        }
    }
    function nextQuote() {
        seq = document.getElementById("quote-sequence");
        newValue = parseInt(seq.value) + 1;
        seq.value = newValue;

        prev = document.getElementById("prevButton");
        prevButton.src = "<%= assetPath("images/Prev.png") %>"
    }
</script>

<div class="page-header">
    <h1><%= t("record_conversation") %></h1>
</div>

    <%= form_for(quote, {action: conversationsPath(), method: "POST"}) { %>

        <table width="100%">
            <%= f.HiddenTag("sequence", {value: quote.Sequence}) %>
            <%= f.HiddenTag("option", {value:"none"}) %>
            <p id="demo"></p>
            <col width="25%">
            <col width="45%">
            <col width="30%">
            <tr>
                <td colspan="3">
                    <%= f.TextArea("Phrase", {label: t("quote_text"), value: quote.Phrase, rows: 10 }) %>
                </td>
            </tr>
            <tr>
                <td colspan="1">
                    <%= f.SelectTag("AuthorID", {label: t("speakers_name"), options: authors, value: quote.AuthorID }) %>
                    
                </td>
                <td valign="middle">
                    <input type="image" class="btn btn-info" data-toggle="tooltip" title= "<%= t("add_speaker_tip") %>" onfocus="option.value='addAuthor'" src="<%= assetPath("images/AddItem.png") %>">
                </td>
                <td colspan="1">
                    <%= f.InputTag("SaidOn", {class: "datepicker", label: t("said_on_date"), value: quote.SaidOn.Format("01/02/2006") }) %>
                </td>
            </tr>
            <tr>
                <td>
                    <%= f.CheckboxTag("MakePublic", {label: t("publish_quote"), value: quote.Publish }) %>
                </td>
                <td colspan="2">
                    <%= f.InputTag("Annotation", {label: t("quote_notes"), placeholder: t("optional"), value: annotation.Note }) %>
                </td>
            </tr>
        </table>
        
        <input type="image" class="btn btn-info" data-toggle="tooltip" title= "<%= t("save_label") %>" onfocus="option.value='save'" src="<%= assetPath("images/Save.png") %>">

        <img id="prevButton" class="btn btn-success" src = "<%= assetPath("images/GrayPrev.png") %>" title = "<%= t("prev_comment_tip") %>" onclick="prevQuote()">
        <img class="btn btn-primary" src = "<%= assetPath("images/Reply.png") %>" title = "<%= t("next_comment_tip") %>" onclick="nextQuote()">

        <a href="<%= conversationsPath() %>"class="btn btn-warning" data-confirm= "<%= t("confirm_prompt") %>"  data-toggle="tooltip" title= "<%= t("cancel_label") %>" >
            <img src="<%= assetPath("images/Cancel.png") %>">
        </a>
    <% } %>
      
    </html>